(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{iydT:function(e,t,i){"use strict";i.r(t),i.d(t,"HomeModule",(function(){return Je}));var s=i("PCNd"),n=i("tyNb"),a=i("fXoL"),o=i("7CaW"),b=i("NMGg"),c=i("eZR5"),r=i("Zpym");function l(e,t="",i=!1){let s=e||t;try{s=s?String(s):s}catch(n){s=t}return s&&i?s.toUpperCase():s}function d(e){return e.charAt(0).toUpperCase()+e.slice(1)}var p=i("JvaJ"),u=i("lJxs"),h=i("XDeO");class m{constructor(e){Object.assign(this,e)}get isEpisode(){return this.type===c.b.EPISODE}get isMovie(){return this.type===c.b.MOVIE}get name(){let e=this.title;return e+=this.year?` (${this.year})`:"",e}get longName(){if(this.isMovie)return this.name;if(this.isEpisode){const e=("00"+this.season).slice(-2),t=Array.isArray(this.episode)?this.episode.map(e=>("00"+e).slice(-2)).join("-"):("00"+this.episode).slice(-2);return`${this.name} S${e}E${t}`}}}class g extends m{constructor(e){super(e)}get timestampFormatted(){return Object(h.a)(Object(h.c)(this.timestamp,"YYYY-MM-DD hh:mm:ss").getTime())}}class f extends m{constructor(e){super(e)}get timestampFormatted(){return Object(h.a)(Object(h.c)(this.timestamp,"YYYY-MM-DD hh:mm:ss").getTime())}}class P{constructor(e){Object.assign(this,e)}}var O=i("XJcI"),y=i("tk/3");let v=(()=>{class e extends O.a{constructor(e){super(e),this.httpClient=e,this.URL=b.b.webRoot+"/api/items"}getWantedItems(){return this.httpClient.get(this.URL+"/wanted",this.options).pipe(Object(u.a)(e=>e.map(e=>new g(e))))}getWantedItem(e){return this.httpClient.get(`${this.URL}/wanted/${e}`,this.options).pipe(Object(u.a)(e=>new g(e)))}updateWantedItem(e){return this.httpClient.put(`${this.URL}/wanted/${e.id}`,JSON.stringify(e),this.options).pipe(Object(u.a)(e=>new g(e)))}resetWantedItem(e){return this.httpClient.patch(`${this.URL}/wanted/${e}`,{action:"reset"},this.options).pipe(Object(u.a)(e=>new g(e)))}deleteWantedItem(e,t){return this.httpClient.patch(`${this.URL}/wanted/${e}`,{action:"delete",cleanup:t},this.options).pipe(Object(u.a)(()=>!0))}skipWantedItem(e,t,i){return this.httpClient.patch(`${this.URL}/wanted/${e}`,{action:"skip",type:t,season:i},this.options).pipe(Object(u.a)(()=>!0))}postProcessWantedItem(e,t){return this.httpClient.patch(`${this.URL}/wanted/${e}`,{action:"postProcess",subtitleIndex:t},this.options).pipe(Object(u.a)(()=>!0))}searchWantedItemIndexerId(e){return this.httpClient.patch(`${this.URL}/wanted/${e}`,{action:"searchIndexerId"},this.options).pipe(Object(u.a)(e=>new g(e)))}searchWantedItemSubtitles(e,t){return this.httpClient.patch(`${this.URL}/wanted/${e}`,{action:"searchSubtitles",language:t},this.options).pipe(Object(u.a)(e=>e.map(e=>new P(e))))}saveWantedItemSubtitle(e,t){return this.httpClient.patch(`${this.URL}/wanted/${e}`,{action:"saveSubtitle",subtitleIndex:t},this.options).pipe(Object(u.a)(()=>!0))}deleteWantedItemSubtitle(e){return this.httpClient.patch(`${this.URL}/wanted/${e}`,{action:"deleteSubtitle"},this.options).pipe(Object(u.a)(()=>!0))}getDownloadedItems(){return this.httpClient.get(this.URL+"/downloaded",this.options).pipe(Object(u.a)(e=>e.map(e=>new f(e))))}}return e.\u0275fac=function(t){return new(t||e)(a.Tb(y.a))},e.\u0275prov=a.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var w=i("hlSE"),I=i("acRR"),S=i("7zfz"),C=i("rEr+"),k=i("ofXK"),M=i("Nf9I"),W=i("jIHw"),Y=i("arFO"),$=i("noUC"),F=i("MC25"),K=i("DRzA"),T=i("M3oc"),U=i("3Pt+");function q(e){const t=Number(e);if(!e||isNaN(t))throw Error(`Value is not a number: '${e}'`);return t}var N=i("hNjJ"),D=i("WJeX"),E=i("/RsI"),x=i("H6Ly"),z=i("doJO");function R(e,t){if(1&e&&(a.Pb(0,"form",3),a.Pb(1,"div",4),a.Pb(2,"div",5),a.Pb(3,"label",6),a.yc(4,"Title"),a.Ob(),a.Ob(),a.Pb(5,"div",7),a.Kb(6,"app-input-text",8),a.Ob(),a.Ob(),a.Pb(7,"div",4),a.Pb(8,"div",5),a.Pb(9,"label",9),a.yc(10,"Year"),a.Ob(),a.Ob(),a.Pb(11,"div",7),a.Kb(12,"app-input-number",10),a.Ob(),a.Ob(),a.Pb(13,"div",4),a.Pb(14,"div",5),a.Pb(15,"label",11),a.yc(16,"Season"),a.Ob(),a.Ob(),a.Pb(17,"div",7),a.Kb(18,"app-input-number",12),a.Ob(),a.Ob(),a.Pb(19,"div",4),a.Pb(20,"div",5),a.Pb(21,"label",13),a.yc(22,"Episode"),a.Ob(),a.Ob(),a.Pb(23,"div",7),a.Kb(24,"app-input-text",14),a.Ob(),a.Ob(),a.Pb(25,"div",4),a.Pb(26,"div",5),a.Pb(27,"label",15),a.yc(28,"Source"),a.Ob(),a.Ob(),a.Pb(29,"div",7),a.Kb(30,"app-input-text",16),a.Ob(),a.Ob(),a.Pb(31,"div",4),a.Pb(32,"div",5),a.Pb(33,"label",17),a.yc(34,"Codec"),a.Ob(),a.Ob(),a.Pb(35,"div",7),a.Kb(36,"app-input-text",18),a.Ob(),a.Ob(),a.Pb(37,"div",4),a.Pb(38,"div",5),a.Pb(39,"label",19),a.yc(40,"Group"),a.Ob(),a.Ob(),a.Pb(41,"div",7),a.Kb(42,"app-input-text",20),a.Ob(),a.Ob(),a.Ob()),2&e){const e=a.Yb();a.dc("formGroup",e.itemForm),a.yb(6),a.dc("validationFeedback",e.updateAttempt),a.yb(6),a.dc("showButtons",!1),a.yb(6),a.dc("showButtons",!1)}}function j(e,t){if(1&e){const e=a.Qb();a.Pb(0,"p-button",21),a.Wb("click",(function(){return a.qc(e),a.Yb().close()})),a.Ob(),a.Pb(1,"p-button",22),a.Wb("click",(function(){return a.qc(e),a.Yb().resetWantedItem()})),a.Ob(),a.Pb(2,"p-button",23),a.Wb("click",(function(){return a.qc(e),a.Yb().updateWantedItem()})),a.Ob()}}let L=(()=>{class e{constructor(e,t,i){this.fb=e,this.itemService=t,this.messageService=i,this.visible=!1,this.visibleChange=new a.n,this.wantedItemChange=new a.n,this.updateAttempt=!1}ngOnInit(){this.buildForm(this.wantedItem)}buildForm(e){this.itemForm=this.fb.group({title:[e.title,[U.n.required,D.a.notEmpty]],year:[e.year,[]],season:[e.season,[]],episode:[e.episode?e.episode.toString():e.codec,[]],source:[e.source?e.source.toString():e.codec,[]],quality:[e.quality,[]],codec:[e.codec?e.codec.toString():e.codec,[]],releaseGroup:[e.releaseGroup,[]]})}resetWantedItem(){const e=this.getWantedItem();this.itemService.resetWantedItem(e.id).subscribe(e=>{this.wantedItemChange.emit(e),this.messageService.showSuccessMessage(`Restored ${e.longName}.`),this.close()},()=>this.messageService.showErrorMessage("Unable to restore "+e.longName))}updateWantedItem(){if(this.updateAttempt=!0,this.itemForm.valid){const e=this.getWantedItem();this.itemService.updateWantedItem(e).subscribe(e=>{this.wantedItemChange.emit(e),this.messageService.showSuccessMessage(`Updated ${e.longName}.`),this.close()},()=>this.messageService.showErrorMessage("Unable to update "+e.longName))}}getWantedItem(){const e=new g(this.wantedItem);e.title=N.a.getFormControlValue(this.itemForm,"title"),e.year=N.a.getFormControlValue(this.itemForm,"year"),e.season=N.a.getFormControlValue(this.itemForm,"season");const t=N.a.getFormControlValue(this.itemForm,"episode");e.episode=t&&t.indexOf(",")>0?function(e){if(e){if("number"==typeof e)return[e];if("string"==typeof e)return e.split(",").map(e=>q(e))}throw Error(`Value is not a list of numbers: '${e}'`)}(t):t?q(t):null;const i=N.a.getFormControlValue(this.itemForm,"source");e.source=i&&i.indexOf(",")>0?i.split(",").map(e=>e.trim()):i,e.quality=N.a.getFormControlValue(this.itemForm,"quality");const s=N.a.getFormControlValue(this.itemForm,"codec");return e.codec=s&&s.indexOf(",")>0?s.split(",").map(e=>e.trim()):s,e.releaseGroup=N.a.getFormControlValue(this.itemForm,"releaseGroup"),e}close(){this.visibleChange.emit(!1)}}return e.\u0275fac=function(t){return new(t||e)(a.Jb(U.c),a.Jb(v),a.Jb(I.a))},e.\u0275cmp=a.Db({type:e,selectors:[["app-manual-refine"]],inputs:{visible:"visible",wantedItem:"wantedItem"},outputs:{visibleChange:"visibleChange",wantedItemChange:"wantedItemChange"},decls:3,vars:5,consts:[["header","Manually refine item details","styleClass","dialog-manual-refine",3,"visible","modal","closable","resizable","visibleChange"],["class","form",3,"formGroup",4,"ngIf"],["pTemplate","footer"],[1,"form",3,"formGroup"],[1,"row","form-row"],[1,"col-12","col-sm-4","form-row-label"],["for","title",1,"label"],[1,"col-12","col-sm-8"],["formControlName","title",3,"validationFeedback"],["for","year",1,"label"],["formControlName","year",3,"showButtons"],["for","season",1,"label"],["formControlName","season",3,"showButtons"],["for","episode",1,"label"],["formControlName","episode"],["for","source",1,"label"],["formControlName","source"],["for","codec",1,"label"],["formControlName","codec"],["for","releaseGroup",1,"label"],["formControlName","releaseGroup"],["icon","pi pi-times","label","Cancel","styleClass","p-button p-button-secondary",3,"click"],["icon","pi pi-undo","label","Reset","styleClass","p-button",3,"click"],["icon","pi pi-check","label","Update","styleClass","p-button mr-0",3,"click"]],template:function(e,t){1&e&&(a.Pb(0,"p-dialog",0),a.Wb("visibleChange",(function(e){return t.visible=e})),a.wc(1,R,43,4,"form",1),a.wc(2,j,3,0,"ng-template",2),a.Ob()),2&e&&(a.dc("visible",t.visible)("modal",!0)("closable",!1)("resizable",!1),a.yb(1),a.dc("ngIf",t.itemForm))},directives:[E.a,k.j,S.f,U.o,U.k,U.f,x.a,U.j,U.e,z.a,W.a],styles:[".dialog-manual-refine{width:30rem}"]}),e})();var A=i("rLzU"),_=i("7kUa");function G(e,t){if(1&e){const e=a.Qb();a.Pb(0,"div",15),a.Pb(1,"div",16),a.Pb(2,"span",17),a.yc(3,"Type"),a.Ob(),a.Pb(4,"p-dropdown",18),a.Wb("onChange",(function(t){return a.qc(e),a.Yb(),a.oc(1).filter(t.value,"type","equals")})),a.Ob(),a.Ob(),a.Pb(5,"span",19),a.Kb(6,"app-table-filter",20),a.Ob(),a.Ob()}if(2&e){const e=a.Yb(),t=a.oc(1);a.yb(4),a.dc("options",e.videoTypes),a.yb(2),a.dc("table",t)("tableStateKey",e.tableStateKey)}}function J(e,t){1&e&&(a.Pb(0,"tr"),a.Pb(1,"th",21),a.Pb(2,"span"),a.yc(3,"Name"),a.Kb(4,"p-sortIcon",22),a.Ob(),a.Ob(),a.Pb(5,"th",23),a.Pb(6,"span"),a.yc(7,"Season"),a.Kb(8,"p-sortIcon",24),a.Ob(),a.Ob(),a.Pb(9,"th",25),a.Pb(10,"span"),a.yc(11,"Episode"),a.Kb(12,"p-sortIcon",26),a.Ob(),a.Ob(),a.Pb(13,"th",27),a.Pb(14,"span"),a.yc(15,"Source"),a.Kb(16,"p-sortIcon",28),a.Ob(),a.Ob(),a.Pb(17,"th",29),a.Pb(18,"span"),a.yc(19,"Quality"),a.Kb(20,"p-sortIcon",30),a.Ob(),a.Ob(),a.Pb(21,"th",31),a.Pb(22,"span"),a.yc(23,"Codec"),a.Kb(24,"p-sortIcon",32),a.Ob(),a.Ob(),a.Pb(25,"th",33),a.Pb(26,"span"),a.yc(27,"Group"),a.Kb(28,"p-sortIcon",34),a.Ob(),a.Ob(),a.Pb(29,"th",35),a.Pb(30,"span"),a.yc(31,"Lang"),a.Kb(32,"p-sortIcon",36),a.Ob(),a.Ob(),a.Pb(33,"th",37),a.Pb(34,"span"),a.yc(35,"Time"),a.Kb(36,"p-sortIcon",38),a.Ob(),a.Ob(),a.Ob())}function Q(e,t){if(1&e){const e=a.Qb();a.Pb(0,"ul",50),a.Pb(1,"li",51),a.Pb(2,"a",52),a.Wb("click",(function(){a.qc(e);const t=a.Yb().$implicit;return a.Yb().postProcessWantedItem(t)})),a.yc(3,"Post process show"),a.Ob(),a.Ob(),a.Pb(4,"li",51),a.Pb(5,"a",52),a.Wb("click",(function(){a.qc(e);const t=a.Yb().$implicit;return a.Yb().deleteWantedItem(t)})),a.yc(6,"Delete show"),a.Ob(),a.Ob(),a.Pb(7,"li",51),a.Pb(8,"a",52),a.Wb("click",(function(){a.qc(e);const t=a.Yb().$implicit;return a.Yb().skipShow(t)})),a.yc(9,"Skip show"),a.Ob(),a.Ob(),a.Ob()}}function H(e,t){if(1&e){const e=a.Qb();a.Pb(0,"ul",50),a.Pb(1,"li",51),a.Pb(2,"a",52),a.Wb("click",(function(){a.qc(e);const t=a.Yb().$implicit;return a.Yb().postProcessWantedItem(t)})),a.yc(3,"Post process movie"),a.Ob(),a.Ob(),a.Pb(4,"li",51),a.Pb(5,"a",52),a.Wb("click",(function(){a.qc(e);const t=a.Yb().$implicit;return a.Yb().deleteWantedItem(t)})),a.yc(6,"Delete movie"),a.Ob(),a.Ob(),a.Pb(7,"li",51),a.Pb(8,"a",52),a.Wb("click",(function(){a.qc(e);const t=a.Yb().$implicit;return a.Yb().skipMovie(t)})),a.yc(9,"Skip movie"),a.Ob(),a.Ob(),a.Ob()}}function V(e,t){if(1&e){const e=a.Qb();a.Pb(0,"a",57),a.Wb("click",(function(){a.qc(e);const t=a.Yb(2).$implicit;return a.Yb().searchIndexerId(t)})),a.Kb(1,"i",58),a.Ob()}}function B(e,t){if(1&e&&(a.Pb(0,"a",59),a.Kb(1,"i",60),a.Ob()),2&e){const e=a.Yb(2).$implicit,t=a.Yb();a.dc("href",t.getTvdbUrl(e),a.sc)}}function X(e,t){if(1&e){const e=a.Qb();a.Nb(0),a.wc(1,V,2,0,"a",53),a.wc(2,B,2,1,"a",54),a.Pb(3,"a",55),a.Wb("click",(function(){a.qc(e);const t=a.Yb().$implicit;return a.Yb().openShowSettingsDialog(t)})),a.Kb(4,"i",56),a.Ob(),a.Mb()}if(2&e){const e=a.Yb().$implicit;a.yb(1),a.dc("ngIf",!e.tvdbId),a.yb(1),a.dc("ngIf",e.tvdbId)}}function Z(e,t){if(1&e){const e=a.Qb();a.Pb(0,"a",57),a.Wb("click",(function(){a.qc(e);const t=a.Yb(2).$implicit;return a.Yb().searchIndexerId(t)})),a.Kb(1,"i",62),a.Ob()}}function ee(e,t){if(1&e&&(a.Pb(0,"a",59),a.Kb(1,"i",63),a.Ob()),2&e){const e=a.Yb(2).$implicit,t=a.Yb();a.dc("href",t.getImdbUrl(e),a.sc)}}function te(e,t){if(1&e){const e=a.Qb();a.Nb(0),a.wc(1,Z,2,0,"a",53),a.wc(2,ee,2,1,"a",54),a.Pb(3,"a",55),a.Wb("click",(function(){a.qc(e);const t=a.Yb().$implicit;return a.Yb().openMovieSettingsDialog(t)})),a.Kb(4,"i",61),a.Ob(),a.Mb()}if(2&e){const e=a.Yb().$implicit;a.yb(1),a.dc("ngIf",!e.imdbId),a.yb(1),a.dc("ngIf",e.imdbId)}}function ie(e,t){if(1&e){const e=a.Qb();a.Nb(0),a.Pb(1,"a",55),a.Wb("click",(function(){a.qc(e);const t=a.Yb().$implicit;return a.Yb().openManualRefineDialog(t)})),a.Kb(2,"i",64),a.Ob(),a.Mb()}}function se(e,t){1&e&&a.Kb(0,"i",65)}function ne(e,t){1&e&&a.Kb(0,"i",66)}function ae(e,t){if(1&e){const e=a.Qb();a.Pb(0,"span",67),a.Pb(1,"a",68),a.Wb("click",(function(){a.qc(e);const i=t.$implicit,s=a.Yb().$implicit;return a.Yb().goToManualSearch(s,i)})),a.yc(2),a.Ob(),a.Ob()}if(2&e){const e=t.$implicit;a.yb(2),a.zc(e)}}function oe(e,t){if(1&e&&(a.Pb(0,"tr"),a.Pb(1,"td"),a.Pb(2,"span",39),a.yc(3,"Name"),a.Ob(),a.Pb(4,"span",40),a.Pb(5,"span",41),a.Pb(6,"a",42),a.yc(7),a.Ob(),a.wc(8,Q,10,0,"ul",43),a.wc(9,H,10,0,"ul",43),a.Ob(),a.Pb(10,"span",44),a.Pb(11,"app-icon-dropdown"),a.Pb(12,"li"),a.Pb(13,"span",45),a.yc(14,"File name:"),a.Ob(),a.Pb(15,"span"),a.yc(16),a.Ob(),a.Ob(),a.Pb(17,"li"),a.Pb(18,"span",45),a.yc(19,"File path:"),a.Ob(),a.Pb(20,"span"),a.yc(21),a.Ob(),a.Ob(),a.Pb(22,"li"),a.Pb(23,"span",45),a.yc(24,"File size:"),a.Ob(),a.Pb(25,"span"),a.yc(26),a.Ob(),a.Ob(),a.Ob(),a.wc(27,X,5,2,"ng-container",46),a.wc(28,te,5,2,"ng-container",46),a.wc(29,ie,3,0,"ng-container",46),a.wc(30,se,1,0,"i",47),a.wc(31,ne,1,0,"i",48),a.Ob(),a.Ob(),a.Ob(),a.Pb(32,"td"),a.Pb(33,"span",39),a.yc(34,"Season"),a.Ob(),a.Pb(35,"span",40),a.yc(36),a.Ob(),a.Ob(),a.Pb(37,"td"),a.Pb(38,"span",39),a.yc(39,"Episode"),a.Ob(),a.Pb(40,"span",40),a.yc(41),a.Ob(),a.Ob(),a.Pb(42,"td"),a.Pb(43,"span",39),a.yc(44,"Source"),a.Ob(),a.Pb(45,"span",40),a.yc(46),a.Ob(),a.Ob(),a.Pb(47,"td"),a.Pb(48,"span",39),a.yc(49,"Quality"),a.Ob(),a.Pb(50,"span",40),a.yc(51),a.Ob(),a.Ob(),a.Pb(52,"td"),a.Pb(53,"span",39),a.yc(54,"Codec"),a.Ob(),a.Pb(55,"span",40),a.yc(56),a.Ob(),a.Ob(),a.Pb(57,"td"),a.Pb(58,"span",39),a.yc(59,"Group"),a.Ob(),a.Pb(60,"span",40),a.yc(61),a.Ob(),a.Ob(),a.Pb(62,"td"),a.Pb(63,"span",39),a.yc(64,"Lang"),a.Ob(),a.Pb(65,"span",40),a.wc(66,ae,3,1,"span",49),a.Ob(),a.Ob(),a.Pb(67,"td"),a.Pb(68,"span",39),a.yc(69,"Time"),a.Ob(),a.Pb(70,"span",40),a.yc(71),a.Ob(),a.Ob(),a.Ob()),2&e){const e=t.$implicit,i=a.Yb();a.yb(7),a.zc(e.name),a.yb(1),a.dc("ngIf",e.isEpisode),a.yb(1),a.dc("ngIf",e.isMovie),a.yb(7),a.zc(e.videoFileName),a.yb(5),a.zc(e.videoFilePath),a.yb(5),a.zc(e.videoFileSize),a.yb(1),a.dc("ngIf",e.isEpisode),a.yb(1),a.dc("ngIf",e.isMovie),a.yb(1),a.dc("ngIf",i.manualRefineEnabled),a.yb(1),a.dc("ngIf",e.isSearchActive),a.yb(1),a.dc("ngIf",!e.isSearchActive),a.yb(5),a.zc(e.season),a.yb(5),a.zc(e.episode),a.yb(5),a.zc(i.displayUpperCase(e.source)),a.yb(5),a.zc(i.displayUpperCase(e.quality)),a.yb(5),a.zc(i.displayUpperCase(e.codec)),a.yb(5),a.zc(i.displayUpperCase(e.releaseGroup)),a.yb(5),a.dc("ngForOf",e.languages),a.yb(5),a.zc(e.timestampFormatted)}}function be(e,t){if(1&e){const e=a.Qb();a.Pb(0,"app-show-settings",69),a.Wb("visibleChange",(function(t){return a.qc(e),a.Yb().showShowSettings=t})),a.Ob()}if(2&e){const e=a.Yb();a.dc("visible",e.showShowSettings)("tvdbId",e.selectedWantedItem.tvdbId)("title",e.selectedWantedItem.name)}}function ce(e,t){if(1&e){const e=a.Qb();a.Pb(0,"app-movie-settings",70),a.Wb("visibleChange",(function(t){return a.qc(e),a.Yb().showMovieSettings=t})),a.Ob()}if(2&e){const e=a.Yb();a.dc("visible",e.showMovieSettings)("imdbId",e.selectedWantedItem.imdbId)("title",e.selectedWantedItem.name)}}function re(e,t){if(1&e){const e=a.Qb();a.Pb(0,"app-manual-refine",71),a.Wb("visibleChange",(function(t){return a.qc(e),a.Yb().showManualRefine=t}))("wantedItemChange",(function(t){return a.qc(e),a.Yb().updateWantedItem(t)})),a.Ob()}if(2&e){const e=a.Yb();a.dc("visible",e.showManualRefine)("wantedItem",e.selectedWantedItem)}}function le(e,t){if(1&e){const e=a.Qb();a.Pb(0,"div",72),a.Pb(1,"span",73),a.yc(2,"Cleanup leftovers"),a.Ob(),a.Pb(3,"p-inputSwitch",74),a.Wb("ngModelChange",(function(t){return a.qc(e),a.Yb().cleanupOnDelete=t})),a.Ob(),a.Ob()}if(2&e){const e=a.Yb();a.yb(3),a.dc("ngModel",e.cleanupOnDelete)}}function de(e,t){if(1&e){const e=a.Qb();a.Pb(0,"div",75),a.Pb(1,"span",73),a.yc(2,"Season(s)"),a.Ob(),a.Pb(3,"input",76),a.Wb("ngModelChange",(function(t){return a.qc(e),a.Yb().seasonToSkip=t})),a.Ob(),a.Ob()}if(2&e){const e=a.Yb();a.yb(3),a.dc("ngModel",e.seasonToSkip)}}const pe=function(){return{showAll:"All"}},ue=function(e){return[5,10,25,50,e]};let he=(()=>{class e{constructor(e,t,i,s,n){this.router=e,this.itemService=t,this.systemEventService=i,this.messageService=s,this.confirmationService=n,this.totals=new a.n,this.showShowSettings=!1,this.showMovieSettings=!1,this.showManualRefine=!1,this.manualRefineEnabled=!1,this.loading=!1,this.cleanupOnDelete=!1,this.seasonToSkip="00",this.globalFilterFields=["name","season","episode","source","quality","codec","releaseGroup","languages","timestamp"],this.tableStateKey="autosubliminal-home-wanted-table"}ngOnInit(){this.manualRefineEnabled=b.b.manualRefineVideo,this.buildSelectItems(),this.loadWantedItems(),this.scanDiskSubscription=this.systemEventService.schedulerFinish.subscribe(e=>{e.name===b.b.scanDisk&&this.loadWantedItems()}),this.checkSubSubscription=this.systemEventService.schedulerFinish.subscribe(e=>{e.name===b.b.checkSub&&this.loadWantedItems()})}ngOnDestroy(){this.scanDiskSubscription.unsubscribe(),this.checkSubSubscription.unsubscribe()}buildSelectItems(){this.videoTypes=[],this.videoTypes.push({label:"All",value:null}),Object.values(c.b).forEach(e=>this.videoTypes.push({label:d(e),value:e}))}loadWantedItems(){this.loading=!0,this.itemService.getWantedItems().subscribe(e=>{this.wantedItems=e;const t=e.length,i=e.filter(e=>e.isEpisode).length,s=e.filter(e=>e.isMovie).length;this.totals.emit({total:t,totalEpisodes:i,totalMovies:s}),this.loading=!1},()=>{this.loading=!1,this.messageService.showErrorMessage("Unable to get the wanted items")})}sort(e){Object(p.a)(e)}displayUpperCase(e){return l(e,"N/A",!0)}getTvdbUrl(e){return Object(r.f)(e.tvdbId)}getImdbUrl(e){return Object(r.c)(e.imdbId)}searchIndexerId(e){const t=e.isEpisode?"tvdb id":"imdb id";this.messageService.showInfoMessage(`Searching for ${t} for ${e.longName}.`),this.itemService.searchWantedItemIndexerId(e.id).subscribe(e=>{this.updateWantedItem(e),this.messageService.showSuccessMessage(`${d(t)} found for ${e.longName}.`)},()=>this.messageService.showErrorMessage(`Unable to search ${t} for ${e.longName}!`))}openShowSettingsDialog(e){this.showShowSettings=!0,this.selectedWantedItem=e}openMovieSettingsDialog(e){this.showMovieSettings=!0,this.selectedWantedItem=e}openManualRefineDialog(e){this.showManualRefine=!0,this.selectedWantedItem=e}goToManualSearch(e,t){this.router.navigate(["/home/search"],{queryParams:{wantedItemId:e.id,language:t}})}updateWantedItem(e){this.wantedItems=this.wantedItems.map(t=>t.id===e.id?e:t)}postProcessWantedItem(e){this.itemService.postProcessWantedItem(e.id).subscribe(()=>{this.removeWantedItemFromList(e),this.messageService.showSuccessMessage(`Post processed ${e.longName}.`)},()=>this.messageService.showErrorMessage(`Unable to post process ${e.longName}!`))}deleteWantedItem(e){this.confirmationType="delete",this.cleanupOnDelete=!1,this.confirmationService.confirm({message:`Are you sure that you want to delete <b>${e.longName}</b>?<br><small><i>Toggle button if you want to cleanup leftovers as well.</i></small>`,accept:()=>{this.itemService.deleteWantedItem(e.id,this.cleanupOnDelete).subscribe(()=>{this.removeWantedItemFromList(e),this.messageService.showSuccessMessage(`Deleted ${e.longName}.`)},()=>this.messageService.showErrorMessage(`Unable to delete ${e.longName}!`))}})}skipShow(e){this.confirmationType="skip",this.seasonToSkip="00",this.confirmationService.confirm({message:`Are you sure that you want to skip show <b>${e.name}</b>?<br><small><i>Enter season(s) to skip (comma separated, 00 = all seasons, 0 = specials).</i></small>`,accept:()=>{this.itemService.skipWantedItem(e.id,e.type,this.seasonToSkip).subscribe(()=>{this.removeWantedItemFromList(e),this.messageService.showSuccessMessage(this.seasonToSkip&&"00"!==this.seasonToSkip?`Skipped the show ${e.name} season(s) ${this.seasonToSkip}.`:`Skipped the show ${e.name} all seasons.`)},()=>this.messageService.showErrorMessage(`Unable to skip the show ${e.name}!`))}})}skipMovie(e){this.confirmationService.confirm({message:`Are you sure that you want to skip movie <b>${e.name}</b>?`,accept:()=>{this.itemService.skipWantedItem(e.id,e.type).subscribe(()=>{this.removeWantedItemFromList(e),this.messageService.showSuccessMessage(`Skipped the movie ${e.name}.`)},()=>this.messageService.showErrorMessage(`Unable to skip the movie ${e.name}!`))}})}removeWantedItemFromList(e){this.wantedItems=this.wantedItems.filter(t=>t.id!==e.id)}}return e.\u0275fac=function(t){return new(t||e)(a.Jb(n.b),a.Jb(v),a.Jb(w.a),a.Jb(I.a),a.Jb(S.a))},e.\u0275cmp=a.Db({type:e,selectors:[["app-home-wanted"]],inputs:{wantedItems:"wantedItems"},outputs:{totals:"totals"},decls:17,vars:19,consts:[["stateStorage","local","currentPageReportTemplate","{first} to {last} of {totalRecords}","styleClass","p-datatable-sm p-datatable-gridlines p-datatable-striped p-datatable-responsive-mode",3,"value","stateKey","loading","autoLayout","rowHover","paginator","rows","rowsPerPageOptions","showCurrentPageReport","globalFilterFields","customSort","sortFunction"],["wantedTable",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"visible","tvdbId","title","visibleChange",4,"ngIf"],[3,"visible","imdbId","title","visibleChange",4,"ngIf"],[3,"visible","wantedItem","visibleChange","wantedItemChange",4,"ngIf"],["header","Confirmation","icon","pi pi-exclamation-triangle"],["cd",""],[1,"confirmation-buttons"],["class","confirmation-cleanup-toggle",4,"ngIf"],["class","confirmation-skip-season",4,"ngIf"],["type","button","pButton","","icon","pi pi-times","label","No",3,"click"],["type","button","pButton","","icon","pi pi-check","label","Yes",3,"click"],[1,"caption"],[1,"p-inputgroup","dropdown"],[1,"p-inputgroup-addon"],[3,"options","onChange"],[1,"ml-auto"],["matchMode","contains",3,"table","tableStateKey"],["pSortableColumn","name"],["field","name"],["pSortableColumn","season"],["field","season"],["pSortableColumn","episode"],["field","episode"],["pSortableColumn","source"],["field","source"],["pSortableColumn","quality"],["field","quality"],["pSortableColumn","codec"],["field","codec"],["pSortableColumn","releaseGroup"],["field","releaseGroup"],["pSortableColumn","languages"],["field","languages"],["pSortableColumn","timestamp"],["field","timestamp"],[1,"p-column-title"],[1,"p-column-data"],[1,"dropdown"],["data-toggle","dropdown","data-display","static","aria-haspopup","true","aria-expanded","false","title","Click for actions",1,"dropdown-toggle","has-tip","dropdown-link"],["class","dropdown-menu has-tip",4,"ngIf"],[1,"icon-group"],[1,"icon-dropdown-title"],[4,"ngIf"],["class","fa fa-check-circle text-success","aria-hidden","true","title","Included in automatic search",4,"ngIf"],["class","fa fa-pause-circle text-warning","aria-hidden","true","title","Not included in automatic search",4,"ngIf"],["class","p-tag language mr-2",4,"ngFor","ngForOf"],[1,"dropdown-menu","has-tip"],[1,"dropdown-item"],[3,"click"],["class","icon-link text-danger",3,"click",4,"ngIf"],["class","icon-link","target","_blank",3,"href",4,"ngIf"],[1,"icon-link",3,"click"],["aria-hidden","true","title","Click to edit show settings",1,"fa","fa-wrench"],[1,"icon-link","text-danger",3,"click"],["aria-hidden","true","title","Click to search tvdb id",1,"fa","fa-exclamation-triangle"],["target","_blank",1,"icon-link",3,"href"],["aria-hidden","true","title","Click to visit Tvdb",1,"fa","fa-television"],["aria-hidden","true","title","Click to edit movie settings",1,"fa","fa-wrench"],["aria-hidden","true","title","Click to search imdb id",1,"fa","fa-exclamation-triangle"],["aria-hidden","true","title","Click to visit Imdb",1,"fa","fa-imdb"],["aria-hidden","true","title","Click to manually refine item details",1,"fa","fa-pencil"],["aria-hidden","true","title","Included in automatic search",1,"fa","fa-check-circle","text-success"],["aria-hidden","true","title","Not included in automatic search",1,"fa","fa-pause-circle","text-warning"],[1,"p-tag","language","mr-2"],["title","Click to search subtitles",1,"icon-link",3,"click"],[3,"visible","tvdbId","title","visibleChange"],[3,"visible","imdbId","title","visibleChange"],[3,"visible","wantedItem","visibleChange","wantedItemChange"],[1,"confirmation-cleanup-toggle"],[1,"label"],[3,"ngModel","ngModelChange"],[1,"confirmation-skip-season"],["type","text","pInputText","",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e){const e=a.Qb();a.Pb(0,"p-table",0,1),a.Wb("sortFunction",(function(e){return t.sort(e)})),a.wc(2,G,7,3,"ng-template",2),a.wc(3,J,37,0,"ng-template",3),a.wc(4,oe,72,19,"ng-template",4),a.Ob(),a.wc(5,be,1,3,"app-show-settings",5),a.wc(6,ce,1,3,"app-movie-settings",6),a.wc(7,re,1,2,"app-manual-refine",7),a.Pb(8,"p-confirmDialog",8,9),a.Pb(10,"p-footer"),a.Pb(11,"div",10),a.wc(12,le,4,1,"div",11),a.wc(13,de,4,1,"div",12),a.Pb(14,"div"),a.Pb(15,"button",13),a.Wb("click",(function(){return a.qc(e),a.oc(9).reject()})),a.Ob(),a.Pb(16,"button",14),a.Wb("click",(function(){return a.qc(e),a.oc(9).accept()})),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()}2&e&&(a.dc("value",t.wantedItems)("stateKey",t.tableStateKey)("loading",t.loading)("autoLayout",!0)("rowHover",!0)("paginator",!0)("rows",10)("rowsPerPageOptions",a.gc(17,ue,a.fc(16,pe)))("showCurrentPageReport",!0)("globalFilterFields",t.globalFilterFields)("customSort",!0),a.yb(5),a.dc("ngIf",t.showShowSettings),a.yb(1),a.dc("ngIf",t.showMovieSettings),a.yb(1),a.dc("ngIf",t.showManualRefine),a.yb(5),a.dc("ngIf","delete"===t.confirmationType),a.yb(1),a.dc("ngIf","skip"===t.confirmationType))},directives:[C.c,S.f,k.j,M.a,S.b,W.b,Y.a,$.a,C.b,C.a,F.a,k.i,K.a,T.a,L,A.a,U.j,U.l,U.b,_.a],styles:[".p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:visible!important}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{white-space:nowrap}.confirmation-buttons[_ngcontent-%COMP%]{justify-content:space-between}.confirmation-buttons[_ngcontent-%COMP%], .confirmation-buttons[_ngcontent-%COMP%]   .confirmation-cleanup-toggle[_ngcontent-%COMP%], .confirmation-buttons[_ngcontent-%COMP%]   .confirmation-skip-season[_ngcontent-%COMP%]{display:flex;align-items:center}.confirmation-buttons[_ngcontent-%COMP%]   .confirmation-cleanup-toggle[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .confirmation-buttons[_ngcontent-%COMP%]   .confirmation-skip-season[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-right:.5rem}"]}),e})();function me(e,t){if(1&e){const e=a.Qb();a.Pb(0,"div",5),a.Pb(1,"div",6),a.Pb(2,"span",7),a.yc(3,"Type"),a.Ob(),a.Pb(4,"p-dropdown",8),a.Wb("onChange",(function(t){return a.qc(e),a.Yb(),a.oc(1).filter(t.value,"type","equals")})),a.Ob(),a.Ob(),a.Pb(5,"span",9),a.Kb(6,"app-table-filter",10),a.Ob(),a.Ob()}if(2&e){const e=a.Yb(),t=a.oc(1);a.yb(4),a.dc("options",e.videoTypes),a.yb(2),a.dc("table",t)("tableStateKey",e.tableStateKey)}}function ge(e,t){1&e&&(a.Pb(0,"tr"),a.Pb(1,"th",11),a.Pb(2,"span"),a.yc(3,"Name"),a.Kb(4,"p-sortIcon",12),a.Ob(),a.Ob(),a.Pb(5,"th",13),a.Pb(6,"span"),a.yc(7,"Season"),a.Kb(8,"p-sortIcon",14),a.Ob(),a.Ob(),a.Pb(9,"th",15),a.Pb(10,"span"),a.yc(11,"Episode"),a.Kb(12,"p-sortIcon",16),a.Ob(),a.Ob(),a.Pb(13,"th",17),a.Pb(14,"span"),a.yc(15,"Source"),a.Kb(16,"p-sortIcon",18),a.Ob(),a.Ob(),a.Pb(17,"th",19),a.Pb(18,"span"),a.yc(19,"Quality"),a.Kb(20,"p-sortIcon",20),a.Ob(),a.Ob(),a.Pb(21,"th",21),a.Pb(22,"span"),a.yc(23,"Codec"),a.Kb(24,"p-sortIcon",22),a.Ob(),a.Ob(),a.Pb(25,"th",23),a.Pb(26,"span"),a.yc(27,"Group"),a.Kb(28,"p-sortIcon",24),a.Ob(),a.Ob(),a.Pb(29,"th",25),a.Pb(30,"span"),a.yc(31,"Lang"),a.Kb(32,"p-sortIcon",26),a.Ob(),a.Ob(),a.Pb(33,"th",27),a.Pb(34,"span"),a.yc(35,"Time"),a.Kb(36,"p-sortIcon",28),a.Ob(),a.Ob(),a.Ob())}function fe(e,t){if(1&e&&(a.Pb(0,"li"),a.Pb(1,"span",32),a.yc(2,"Video path:"),a.Ob(),a.Pb(3,"span"),a.yc(4),a.Ob(),a.Ob()),2&e){const e=a.Yb().$implicit;a.yb(4),a.zc(e.videoFilePath)}}function Pe(e,t){if(1&e&&(a.Pb(0,"li"),a.Pb(1,"span",32),a.yc(2,"Video name:"),a.Ob(),a.Pb(3,"span"),a.yc(4),a.Ob(),a.Ob()),2&e){const e=a.Yb().$implicit;a.yb(4),a.zc(e.videoFileName)}}function Oe(e,t){if(1&e&&(a.Pb(0,"tr"),a.Pb(1,"td"),a.Pb(2,"span",29),a.yc(3,"Name"),a.Ob(),a.Pb(4,"span",30),a.Pb(5,"span"),a.yc(6),a.Ob(),a.Pb(7,"app-icon-dropdown"),a.wc(8,fe,5,1,"li",31),a.wc(9,Pe,5,1,"li",31),a.Pb(10,"li"),a.Pb(11,"span",32),a.yc(12,"Subtitle:"),a.Ob(),a.Pb(13,"span"),a.yc(14),a.Ob(),a.Ob(),a.Pb(15,"li"),a.Pb(16,"span",32),a.yc(17,"Provider:"),a.Ob(),a.Pb(18,"span"),a.yc(19),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(20,"td"),a.Pb(21,"span",29),a.yc(22,"Season"),a.Ob(),a.Pb(23,"span",30),a.yc(24),a.Ob(),a.Ob(),a.Pb(25,"td"),a.Pb(26,"span",29),a.yc(27,"Episode"),a.Ob(),a.Pb(28,"span",30),a.yc(29),a.Ob(),a.Ob(),a.Pb(30,"td"),a.Pb(31,"span",29),a.yc(32,"Source"),a.Ob(),a.Pb(33,"span",30),a.yc(34),a.Ob(),a.Ob(),a.Pb(35,"td"),a.Pb(36,"span",29),a.yc(37,"Quality"),a.Ob(),a.Pb(38,"span",30),a.yc(39),a.Ob(),a.Ob(),a.Pb(40,"td"),a.Pb(41,"span",29),a.yc(42,"Codec"),a.Ob(),a.Pb(43,"span",30),a.yc(44),a.Ob(),a.Ob(),a.Pb(45,"td"),a.Pb(46,"span",29),a.yc(47,"Group"),a.Ob(),a.Pb(48,"span",30),a.yc(49),a.Ob(),a.Ob(),a.Pb(50,"td"),a.Pb(51,"span",29),a.yc(52,"Lang"),a.Ob(),a.Pb(53,"span",30),a.Pb(54,"span",33),a.yc(55),a.Ob(),a.Ob(),a.Ob(),a.Pb(56,"td"),a.Pb(57,"span",29),a.yc(58,"Time"),a.Ob(),a.Pb(59,"span",30),a.yc(60),a.Ob(),a.Ob(),a.Ob()),2&e){const e=t.$implicit,i=a.Yb();a.yb(6),a.zc(e.name),a.yb(2),a.dc("ngIf",e.videoFilePath),a.yb(1),a.dc("ngIf",e.videoFileName),a.yb(5),a.zc(e.subtitle),a.yb(5),a.zc(e.provider),a.yb(5),a.zc(e.season),a.yb(5),a.zc(e.episode),a.yb(5),a.zc(i.displayUpperCase(e.source)),a.yb(5),a.zc(i.displayUpperCase(e.quality)),a.yb(5),a.zc(i.displayUpperCase(e.codec)),a.yb(5),a.zc(i.displayUpperCase(e.releaseGroup)),a.yb(6),a.zc(e.language),a.yb(5),a.zc(e.timestampFormatted)}}const ye=function(){return{showAll:"All"}},ve=function(e){return[5,10,25,50,e]};let we=(()=>{class e{constructor(e,t){this.itemService=e,this.messageService=t,this.loading=!1,this.globalFilterFields=["name","season","episode","source","quality","codec","releaseGroup","languages","timestamp"],this.tableStateKey="autosubliminal-home-downloaded-table"}ngOnInit(){this.buildSelectItems(),this.loadDownloadedItems()}buildSelectItems(){this.videoTypes=[],this.videoTypes.push({label:"All",value:null}),Object.values(c.b).forEach(e=>this.videoTypes.push({label:d(e),value:e}))}loadDownloadedItems(){this.loading=!0,this.itemService.getDownloadedItems().subscribe(e=>{this.downloadedItems=e,this.loading=!1},()=>{this.loading=!1,this.messageService.showErrorMessage("Unable to get the downloaded items")})}sort(e){Object(p.a)(e)}displayUpperCase(e){return l(e,"N/A",!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Jb(v),a.Jb(I.a))},e.\u0275cmp=a.Db({type:e,selectors:[["app-home-downloaded"]],inputs:{downloadedItems:"downloadedItems"},decls:5,vars:14,consts:[["stateStorage","local","currentPageReportTemplate","{first} to {last} of {totalRecords}","styleClass","p-datatable-sm p-datatable-gridlines p-datatable-striped p-datatable-responsive-mode",3,"value","stateKey","loading","autoLayout","rowHover","paginator","rows","rowsPerPageOptions","showCurrentPageReport","globalFilterFields","customSort","sortFunction"],["downloadedTable",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"caption"],[1,"p-inputgroup","dropdown"],[1,"p-inputgroup-addon"],[3,"options","onChange"],[1,"ml-auto"],["matchMode","contains",3,"table","tableStateKey"],["pSortableColumn","name"],["field","name"],["pSortableColumn","season"],["field","season"],["pSortableColumn","episode"],["field","episode"],["pSortableColumn","source"],["field","source"],["pSortableColumn","quality"],["field","quality"],["pSortableColumn","codec"],["field","codec"],["pSortableColumn","releaseGroup"],["field","releaseGroup"],["pSortableColumn","languages"],["field","languages"],["pSortableColumn","timestamp"],["field","timestamp"],[1,"p-column-title"],[1,"p-column-data"],[4,"ngIf"],[1,"icon-dropdown-title"],[1,"p-tag","language"]],template:function(e,t){1&e&&(a.Pb(0,"p-table",0,1),a.Wb("sortFunction",(function(e){return t.sort(e)})),a.wc(2,me,7,3,"ng-template",2),a.wc(3,ge,37,0,"ng-template",3),a.wc(4,Oe,61,13,"ng-template",4),a.Ob()),2&e&&a.dc("value",t.downloadedItems)("stateKey",t.tableStateKey)("loading",t.loading)("autoLayout",!0)("rowHover",!0)("paginator",!0)("rows",10)("rowsPerPageOptions",a.gc(12,ve,a.fc(11,ye)))("showCurrentPageReport",!0)("globalFilterFields",t.globalFilterFields)("customSort",!0)},directives:[C.c,S.f,Y.a,$.a,C.b,C.a,F.a,k.j],styles:[".p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:visible!important}"]}),e})(),Ie=(()=>{class e{constructor(){this.total=0,this.totalEpisodes=0,this.totalMovies=0}ngOnInit(){}getTotals(e){this.total=e.total,this.totalEpisodes=e.totalEpisodes,this.totalMovies=e.totalMovies}getWantedHeader(){return`Wanted subtitles (${this.total}) - Episodes (${this.totalEpisodes}) - Movies (${this.totalMovies})`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Db({type:e,selectors:[["app-home"]],decls:5,vars:1,consts:[[1,"container-lg"],["styleClass","mb-3",3,"header"],[3,"totals"],["header","Downloaded subtitles"]],template:function(e,t){1&e&&(a.Pb(0,"div",0),a.Pb(1,"p-panel",1),a.Pb(2,"app-home-wanted",2),a.Wb("totals",(function(e){return t.getTotals(e)})),a.Ob(),a.Ob(),a.Pb(3,"p-panel",3),a.Kb(4,"app-home-downloaded"),a.Ob(),a.Ob()),2&e&&(a.yb(1),a.dc("header",t.getWantedHeader()))},directives:[o.a,he,we],styles:[""]}),e})();var Se=i("jhN1"),Ce=i("fqV1"),ke=i("ZjcB");function Me(e,t){1&e&&(a.Pb(0,"tr"),a.Pb(1,"th",26),a.Pb(2,"span"),a.yc(3,"Score"),a.Kb(4,"p-sortIcon",27),a.Ob(),a.Ob(),a.Pb(5,"th",28),a.Pb(6,"span"),a.yc(7,"Provider"),a.Kb(8,"p-sortIcon",29),a.Ob(),a.Ob(),a.Pb(9,"th"),a.yc(10,"Preview"),a.Ob(),a.Kb(11,"th"),a.Kb(12,"th"),a.Kb(13,"th"),a.Kb(14,"th"),a.Kb(15,"th"),a.Ob())}function We(e,t){if(1&e&&(a.Pb(0,"li"),a.yc(1),a.Ob()),2&e){const e=t.$implicit;a.yb(1),a.zc(e)}}function Ye(e,t){1&e&&a.Kb(0,"i",52)}function $e(e,t){1&e&&a.Kb(0,"i",53)}const Fe=function(e){return{disabled:e}};function Ke(e,t){if(1&e){const e=a.Qb();a.Pb(0,"tr"),a.Pb(1,"td"),a.Pb(2,"span",30),a.yc(3,"Score"),a.Ob(),a.Pb(4,"span",31),a.Pb(5,"span"),a.yc(6),a.Ob(),a.Pb(7,"a",32),a.Wb("click",(function(){a.qc(e);const i=t.$implicit;return a.Yb(2).showScoreDetails(i)})),a.Kb(8,"i",33),a.Ob(),a.Ob(),a.Ob(),a.Pb(9,"td"),a.Pb(10,"span",30),a.yc(11,"Provider"),a.Ob(),a.Pb(12,"span",31),a.Pb(13,"span",34),a.Pb(14,"span",35),a.yc(15),a.Ob(),a.Pb(16,"ul",36),a.wc(17,We,2,1,"li",37),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(18,"td"),a.Pb(19,"span",30),a.yc(20,"Preview"),a.Ob(),a.Pb(21,"div",38),a.Pb(22,"a",39),a.Wb("click",(function(){a.qc(e);const i=t.$implicit;return a.Yb(2).showSubtitlePreview(i)})),a.Kb(23,"i",40),a.Ob(),a.Kb(24,"div",41),a.Ob(),a.Ob(),a.Pb(25,"td",42),a.Pb(26,"span",30),a.yc(27,"Visit website"),a.Ob(),a.Pb(28,"span",31),a.Pb(29,"a",43),a.Kb(30,"i",44),a.Ob(),a.Ob(),a.Ob(),a.Pb(31,"td",42),a.Pb(32,"span",30),a.yc(33,"Save subtitle"),a.Ob(),a.Pb(34,"span",31),a.Pb(35,"a",32),a.Wb("click",(function(){a.qc(e);const i=t.$implicit;return a.Yb(2).saveSubtitle(i)})),a.wc(36,Ye,1,0,"i",45),a.wc(37,$e,1,0,"i",46),a.Ob(),a.Ob(),a.Ob(),a.Pb(38,"td",42),a.Pb(39,"span",30),a.yc(40,"Delete subtitle"),a.Ob(),a.Pb(41,"span",31),a.Pb(42,"a",32),a.Wb("click",(function(){return a.qc(e),a.Yb(2).deleteSubtitle()})),a.Kb(43,"i",47),a.Ob(),a.Ob(),a.Ob(),a.Pb(44,"td",42),a.Pb(45,"span",30),a.yc(46,"Play video"),a.Ob(),a.Pb(47,"span",31),a.Pb(48,"a",48),a.Kb(49,"i",49),a.Ob(),a.Ob(),a.Ob(),a.Pb(50,"td",42),a.Pb(51,"span",30),a.yc(52,"Post process"),a.Ob(),a.Pb(53,"span",31),a.Pb(54,"a",50),a.Wb("click",(function(){a.qc(e);const i=t.$implicit;return a.Yb(2).postProcess(i)})),a.Kb(55,"i",51),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&e){const e=t.$implicit,i=a.Yb(2);a.yb(6),a.zc(e.score),a.yb(9),a.Ac(" ",e.providerName," "),a.yb(2),a.dc("ngForOf",e.releases),a.yb(7),a.dc("innerHTML",e.contentPreview,a.rc),a.yb(5),a.dc("href",i.getWebsiteUrl(e),a.sc),a.yb(7),a.dc("ngIf",e!==i.savedSubtitle),a.yb(1),a.dc("ngIf",e===i.savedSubtitle),a.yb(11),a.dc("href",i.getPlayVideoUrl(),a.sc),a.yb(6),a.dc("ngClass",a.gc(9,Fe,!i.savedSubtitle))}}function Te(e,t){if(1&e){const e=a.Qb();a.Pb(0,"p-panel"),a.Pb(1,"p-header",8),a.Pb(2,"div",9),a.yc(3,"Manual search for subtitles"),a.Ob(),a.Pb(4,"div"),a.Pb(5,"p-button",10),a.Wb("onClick",(function(){return a.qc(e),a.Yb().searchSubtitles()})),a.Ob(),a.Ob(),a.Ob(),a.Pb(6,"app-message",11),a.Kb(7,"i",12),a.Pb(8,"span"),a.yc(9,"Searching subtitles..."),a.Ob(),a.Ob(),a.Pb(10,"div",13),a.Pb(11,"div",14),a.yc(12,"Wanted item"),a.Ob(),a.Pb(13,"div",15),a.Pb(14,"div",16),a.Pb(15,"div",17),a.Pb(16,"span",18),a.yc(17,"File name:"),a.Ob(),a.Ob(),a.Pb(18,"div",19),a.Pb(19,"span",20),a.yc(20),a.Ob(),a.Ob(),a.Ob(),a.Pb(21,"div",16),a.Pb(22,"div",17),a.Pb(23,"span",18),a.yc(24,"File path:"),a.Ob(),a.Ob(),a.Pb(25,"div",19),a.Pb(26,"span",20),a.yc(27),a.Ob(),a.Ob(),a.Ob(),a.Pb(28,"div",16),a.Pb(29,"div",17),a.Pb(30,"span",18),a.yc(31,"Language:"),a.Ob(),a.Ob(),a.Pb(32,"div",19),a.Pb(33,"span",21),a.yc(34),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(35,"div",13),a.Pb(36,"div",14),a.yc(37),a.Ob(),a.Pb(38,"p-table",22),a.wc(39,Me,16,0,"ng-template",23),a.wc(40,Ke,56,11,"ng-template",24),a.Ob(),a.Ob(),a.Pb(41,"p-footer"),a.Pb(42,"div"),a.Pb(43,"button",25),a.Wb("click",(function(){return a.qc(e),a.Yb().goHome()})),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&e){const e=a.Yb();a.yb(5),a.dc("disabled",e.searchInProgress),a.yb(1),a.dc("visible",e.searchInProgress),a.yb(14),a.zc(e.wantedItem.videoFileName),a.yb(7),a.zc(e.wantedItem.videoFilePath),a.yb(7),a.zc(e.language),a.yb(3),a.Ac("Subtitles\xa0(",e.subtitles.length,")"),a.yb(1),a.dc("value",e.subtitles)("loading",e.searchInProgress)("autoLayout",!0)("rowHover",!0)}}function Ue(e,t){if(1&e&&(a.Pb(0,"li"),a.yc(1),a.Ob()),2&e){const e=a.Yb(2);a.yb(1),a.Ac("Hash: ",e.scores.hash,"")}}function qe(e,t){if(1&e&&(a.Pb(0,"li"),a.yc(1),a.Ob()),2&e){const e=a.Yb(2);a.yb(1),a.Ac("Title: ",e.scores.title,"")}}function Ne(e,t){if(1&e&&(a.Pb(0,"li"),a.yc(1),a.Ob()),2&e){const e=a.Yb(2);a.yb(1),a.Ac("Year: ",e.scores.year,"")}}function De(e,t){if(1&e&&(a.Pb(0,"li"),a.yc(1),a.Ob()),2&e){const e=a.Yb(2);a.yb(1),a.Ac("Season: ",e.scores.season,"")}}function Ee(e,t){if(1&e&&(a.Pb(0,"li"),a.yc(1),a.Ob()),2&e){const e=a.Yb(2);a.yb(1),a.Ac("Episode: ",e.scores.episode,"")}}function xe(e,t){if(1&e&&(a.Pb(0,"li"),a.yc(1),a.Ob()),2&e){const e=a.Yb(2);a.yb(1),a.Ac("year: ",e.scores.source,"")}}function ze(e,t){if(1&e&&(a.Pb(0,"li"),a.yc(1),a.Ob()),2&e){const e=a.Yb(2);a.yb(1),a.Ac("Quality: ",e.scores.quality,"")}}function Re(e,t){if(1&e&&(a.Pb(0,"li"),a.yc(1),a.Ob()),2&e){const e=a.Yb(2);a.yb(1),a.Ac("Codec: ",e.scores.codec,"")}}function je(e,t){if(1&e&&(a.Pb(0,"li"),a.yc(1),a.Ob()),2&e){const e=a.Yb(2);a.yb(1),a.Ac("Release group: ",e.scores.releaseGroup,"")}}function Le(e,t){if(1&e&&(a.Pb(0,"li"),a.yc(1),a.Ob()),2&e){const e=a.Yb(2);a.yb(1),a.Ac("Hearing impaired: ",e.scores.hearingImpaired,"")}}function Ae(e,t){if(1&e&&(a.Pb(0,"div",3),a.Pb(1,"div"),a.yc(2,"Matches:"),a.Ob(),a.Pb(3,"ul"),a.wc(4,Ue,2,1,"li",1),a.wc(5,qe,2,1,"li",1),a.wc(6,Ne,2,1,"li",1),a.wc(7,De,2,1,"li",1),a.wc(8,Ee,2,1,"li",1),a.wc(9,xe,2,1,"li",1),a.wc(10,ze,2,1,"li",1),a.wc(11,Re,2,1,"li",1),a.wc(12,je,2,1,"li",1),a.wc(13,Le,2,1,"li",1),a.Ob(),a.Pb(14,"div"),a.Kb(15,"i",54),a.yc(16),a.Ob(),a.Kb(17,"br"),a.Pb(18,"div"),a.yc(19),a.Ob(),a.Pb(20,"div"),a.yc(21),a.Ob(),a.Pb(22,"div"),a.yc(23),a.Ob(),a.Ob()),2&e){const e=a.Yb();a.yb(4),a.dc("ngIf",e.matches.includes("hash")),a.yb(1),a.dc("ngIf",e.matches.includes("title")),a.yb(1),a.dc("ngIf",e.matches.includes("year")),a.yb(1),a.dc("ngIf",e.matches.includes("season")),a.yb(1),a.dc("ngIf",e.matches.includes("episode")),a.yb(1),a.dc("ngIf",e.matches.includes("source")),a.yb(1),a.dc("ngIf",e.matches.includes("resolution")),a.yb(1),a.dc("ngIf",e.matches.includes("video_codec")),a.yb(1),a.dc("ngIf",e.matches.includes("release_group")),a.yb(1),a.dc("ngIf",e.matches.includes("hearing_impaired")),a.yb(3),a.Ac("\xa0Calculated score: ",e.score,""),a.yb(3),a.Ac("Minimum required default score: ",e.scores.default,""),a.yb(2),a.Ac("Minimum required configured score: ",e.scores.min,""),a.yb(2),a.Ac("Maximum score: ",e.scores.max,"")}}const _e=[{path:"",component:Ie},{path:"search",component:(()=>{class e{constructor(e,t,i,s,n){this.route=e,this.router=t,this.domSanitizer=i,this.itemService=s,this.messageService=n,this.subtitles=[],this.searchInProgress=!1,this.postProcessInProgress=!1,this.showScoreDetailsDialog=!1,this.showSubtitlePreviewDialog=!1}ngOnInit(){this.route.queryParamMap.subscribe(e=>{const t=q(e.get("wantedItemId"));this.language=e.get("language"),this.itemService.getWantedItem(t).subscribe(e=>{this.wantedItem=e,this.scores=this.wantedItem.isEpisode?b.b.episodeScores:b.b.movieScores,this.searchSubtitles()},()=>this.messageService.showErrorMessage("Unable to get the wanted item with id "+t))})}searchSubtitles(){this.searchInProgress=!0,this.subtitles=[],this.itemService.searchWantedItemSubtitles(this.wantedItem.id,this.language).subscribe(e=>{this.subtitles=e,this.searchInProgress=!1,this.messageService.showInfoMessage(this.subtitles.length+" subtitles found.")},()=>{this.searchInProgress=!1,this.messageService.showErrorMessage("Unable to search subtitles!")})}showScoreDetails(e){this.score=e.score,this.matches=e.matches,this.showScoreDetailsDialog=!0}showSubtitlePreview(e){this.subtitlePreview=e.contentPreview,this.showSubtitlePreviewDialog=!0}getWebsiteUrl(e){return Object(r.b)(e.pageLink)}saveSubtitle(e){this.itemService.saveWantedItemSubtitle(this.wantedItem.id,e.subtitleIndex).subscribe(()=>{this.savedSubtitle=e,this.messageService.showInfoMessage("Subtitles saved.")},()=>this.messageService.showErrorMessage("Unable to save the subtitle!"))}deleteSubtitle(){this.itemService.deleteWantedItemSubtitle(this.wantedItem.id).subscribe(()=>{this.savedSubtitle=null,this.messageService.showInfoMessage("Subtitles deleted.")},()=>this.messageService.showErrorMessage("Unable to delete the subtitle!"))}getPlayVideoUrl(){return this.domSanitizer.bypassSecurityTrustResourceUrl(Object(r.d)(this.wantedItem.videoFilePath,this.wantedItem.videoFileName))}postProcess(e){this.postProcessInProgress=!0,this.itemService.postProcessWantedItem(this.wantedItem.id,e.subtitleIndex).subscribe(()=>{this.postProcessInProgress=!1,this.messageService.showSuccessMessage(`Post processed ${this.wantedItem.longName}.`),this.goHome()},()=>{this.postProcessInProgress=!1,this.messageService.showErrorMessage(`Unable to post process ${this.wantedItem.longName}!`)})}goHome(){this.router.navigateByUrl("/home")}}return e.\u0275fac=function(t){return new(t||e)(a.Jb(n.a),a.Jb(n.b),a.Jb(Se.b),a.Jb(v),a.Jb(I.a))},e.\u0275cmp=a.Db({type:e,selectors:[["app-home-search"]],decls:8,vars:12,consts:[[1,"container-lg"],[4,"ngIf"],["header","Subtitle preview",3,"visible","modal","closable","resizable","visibleChange"],[1,"dialog-content"],[3,"innerHTML"],["header","Score details",3,"visible","modal","closable","resizable","visibleChange"],["class","dialog-content",4,"ngIf"],[3,"visible","visibleChange"],[1,"w-100"],[1,"p-panel-title"],["label","Search","icon","pi pi-refresh","styleClass","p-button-outlined",3,"disabled","onClick"],[3,"visible"],["aria-hidden","true",1,"pi","pi-spin","pi-spinner","mr-2"],[1,"panel-section"],[1,"panel-section-header"],[1,"wanted-item-container"],[1,"row"],[1,"col-12","col-sm-12","col-md-2","col-lg-2"],[1,"wanted-item-label"],[1,"col-12","col-sm-12","col-md-10","col-lg-10"],[1,"wanted-item-value"],[1,"p-tag","language"],["styleClass","p-datatable-sm p-datatable-gridlines p-datatable-striped p-datatable-responsive-mode",3,"value","loading","autoLayout","rowHover"],["pTemplate","header"],["pTemplate","body"],["type","button","pButton","","icon","pi pi-chevron-left","label","Return",3,"click"],["pSortableColumn","score"],["field","score"],["pSortableColumn","providerName"],["field","providerName"],[1,"p-column-title"],[1,"p-column-data"],[1,"icon-link",3,"click"],["aria-hidden","true","title","Click to show score details",1,"pi","pi-fw","pi-info-circle"],[1,"dropdown"],["data-toggle","dropdown","data-display","static","aria-haspopup","true","aria-expanded","false","title","Click to show releases",1,"dropdown-toggle","has-tip","icon-link"],[1,"dropdown-menu","has-tip"],[4,"ngFor","ngForOf"],[1,"p-column-data","subtitle-preview"],[1,"icon-link","subtitle-preview-icon",3,"click"],["aria-hidden","true","title","Click to show preview",1,"fa","fa-search-plus"],[1,"subtitle-preview-content",3,"innerHTML"],[1,"subtitle-action"],["target","_blank",1,"icon-link",3,"href"],["aria-hidden","true","title","Click to visit website",1,"fa","fa-external-link"],["class","fa fa-floppy-o","aria-hidden","true","title","Click to save subtitle",4,"ngIf"],["class","fa fa-check-circle-o text-success","aria-hidden","true","title","Subtitle saved",4,"ngIf"],["aria-hidden","true","title","Click to delete subtitle",1,"fa","fa-times"],[1,"icon-link",3,"href"],["aria-hidden","true","title","Click to play video",1,"fa","fa-play-circle-o"],[1,"icon-link",3,"ngClass","click"],["aria-hidden","true","title","Click to execute post processing",1,"fa","fa-refresh"],["aria-hidden","true","title","Click to save subtitle",1,"fa","fa-floppy-o"],["aria-hidden","true","title","Subtitle saved",1,"fa","fa-check-circle-o","text-success"],["aria-hidden","true",1,"pi","pi-arrow-right"]],template:function(e,t){1&e&&(a.Pb(0,"div",0),a.wc(1,Te,44,10,"p-panel",1),a.Ob(),a.Pb(2,"p-dialog",2),a.Wb("visibleChange",(function(e){return t.showSubtitlePreviewDialog=e})),a.Pb(3,"div",3),a.Kb(4,"div",4),a.Ob(),a.Ob(),a.Pb(5,"p-dialog",5),a.Wb("visibleChange",(function(e){return t.showScoreDetailsDialog=e})),a.wc(6,Ae,24,14,"div",6),a.Ob(),a.Pb(7,"app-loading",7),a.Wb("visibleChange",(function(e){return t.postProcessInProgress=e})),a.Ob()),2&e&&(a.yb(1),a.dc("ngIf",t.wantedItem),a.yb(1),a.dc("visible",t.showSubtitlePreviewDialog)("modal",!0)("closable",!0)("resizable",!1),a.yb(2),a.dc("innerHTML",t.subtitlePreview,a.rc),a.yb(1),a.dc("visible",t.showScoreDetailsDialog)("modal",!0)("closable",!0)("resizable",!1),a.yb(1),a.dc("ngIf",t.matches),a.yb(1),a.dc("visible",t.postProcessInProgress))},directives:[k.j,E.a,Ce.a,o.a,S.c,W.a,ke.a,C.c,S.f,S.b,W.b,C.b,C.a,k.i,k.h],styles:[".wanted-item-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:.5rem}.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{white-space:nowrap;margin-top:.5rem;padding:.5rem}.subtitle-preview[_ngcontent-%COMP%]{position:relative}.subtitle-preview[_ngcontent-%COMP%]   .subtitle-preview-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:2rem}.subtitle-preview[_ngcontent-%COMP%]   .subtitle-preview-content[_ngcontent-%COMP%]{height:6.25rem;overflow-y:scroll;word-break:normal;white-space:nowrap}.subtitle-action[_ngcontent-%COMP%]{text-align:center!important}@media screen and (max-width:767px){.subtitle-action[_ngcontent-%COMP%]{text-align:left!important}}.subtitle-action[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]{pointer-events:none;-moz-filter:brightness(50%);-o-filter:brightness(50%);filter:brightness(50%)} .p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:visible!important}"]}),e})()},{path:"**",redirectTo:""}];let Ge=(()=>{class e{}return e.\u0275mod=a.Hb({type:e}),e.\u0275inj=a.Gb({factory:function(t){return new(t||e)},imports:[[n.e.forChild(_e)],n.e]}),e})(),Je=(()=>{class e{}return e.\u0275mod=a.Hb({type:e}),e.\u0275inj=a.Gb({factory:function(t){return new(t||e)},imports:[[s.a,Ge]]}),e})()}}]);