"use strict";(self.webpackChunkautosubliminal=self.webpackChunkautosubliminal||[]).push([[272],{272:(J,Z,o)=>{o.r(Z),o.d(Z,{SystemModule:()=>E});var h=o(3273),p=o(4157),m=o(352),e=o(639),v=o(1841),c=o(5e3),u=o(1245),d=o(3557),r=o(8583);function T(s,a){if(1&s&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Oqu(t.version)}}function f(s,a){if(1&s&&(e.TgZ(0,"div",8),e.TgZ(1,"a",12),e._uU(2),e.qZA(),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.s9C("href",t.versionUrl,e.LSH),e.xp6(1),e.Oqu(t.version)}}function A(s,a){if(1&s&&(e.TgZ(0,"div",6),e.TgZ(1,"div",7),e._uU(2,"Git branch"),e.qZA(),e.TgZ(3,"div",8),e.TgZ(4,"a",12),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&s){const t=e.oxw(2);e.xp6(4),e.s9C("href",t.systemInfo.currentBranchUrl,e.LSH),e.xp6(1),e.Oqu(t.systemInfo.currentBranch)}}function q(s,a){if(1&s&&(e.TgZ(0,"div",6),e.TgZ(1,"div",7),e._uU(2,"Git version"),e.qZA(),e.TgZ(3,"div",8),e.TgZ(4,"a",12),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&s){const t=e.oxw(2);e.xp6(4),e.s9C("href",t.systemInfo.currentVersionUrl,e.LSH),e.xp6(1),e.Oqu(t.systemInfo.currentVersion)}}function U(s,a){if(1&s&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e.TgZ(2,"div",7),e._uU(3,"OS"),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e._uU(8,"PID"),e.qZA(),e.TgZ(9,"div",8),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"div",6),e.TgZ(12,"div",7),e._uU(13,"Version"),e.qZA(),e.YNc(14,T,2,1,"div",9),e.YNc(15,f,3,2,"div",9),e.qZA(),e.YNc(16,A,6,2,"div",10),e.YNc(17,q,6,2,"div",10),e.TgZ(18,"div",6),e.TgZ(19,"div",7),e._uU(20,"System encoding"),e.qZA(),e.TgZ(21,"div",8),e._uU(22),e.qZA(),e.qZA(),e.TgZ(23,"div",6),e.TgZ(24,"div",7),e._uU(25,"Python version"),e.qZA(),e.TgZ(26,"div",8),e._uU(27),e.qZA(),e.qZA(),e.TgZ(28,"div",6),e.TgZ(29,"div",7),e._uU(30,"Python location"),e.qZA(),e.TgZ(31,"div",8),e._uU(32),e.qZA(),e.qZA(),e.TgZ(33,"div",6),e.TgZ(34,"div",7),e._uU(35,"Config file"),e.qZA(),e.TgZ(36,"div",8),e._uU(37),e.qZA(),e.qZA(),e.TgZ(38,"div",6),e.TgZ(39,"div",7),e._uU(40,"Database file"),e.qZA(),e.TgZ(41,"div",8),e._uU(42),e.qZA(),e.qZA(),e.TgZ(43,"div",6),e.TgZ(44,"div",7),e._uU(45,"Log file"),e.qZA(),e.TgZ(46,"div",8),e._uU(47),e.qZA(),e.qZA(),e._UZ(48,"hr",11),e.TgZ(49,"div",6),e.TgZ(50,"div",7),e._uU(51,"Source"),e.qZA(),e.TgZ(52,"div",8),e.TgZ(53,"a",12),e._uU(54),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"div",6),e.TgZ(56,"div",7),e._uU(57,"Issues"),e.qZA(),e.TgZ(58,"div",8),e.TgZ(59,"a",12),e._uU(60),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"div",6),e.TgZ(62,"div",7),e._uU(63,"Wiki"),e.qZA(),e.TgZ(64,"div",8),e.TgZ(65,"a",12),e._uU(66),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s){const t=e.oxw();e.xp6(5),e.Oqu(t.systemInfo.os),e.xp6(5),e.Oqu(t.systemInfo.pid),e.xp6(4),e.Q6J("ngIf",!t.versionUrl),e.xp6(1),e.Q6J("ngIf",t.versionUrl),e.xp6(1),e.Q6J("ngIf",t.gitInstall),e.xp6(1),e.Q6J("ngIf",t.gitInstall),e.xp6(5),e.Oqu(t.systemInfo.systemEncoding),e.xp6(5),e.Oqu(t.systemInfo.pythonVersion),e.xp6(5),e.Oqu(t.systemInfo.pythonLocation),e.xp6(5),e.Oqu(t.systemInfo.configFile),e.xp6(5),e.Oqu(t.systemInfo.databaseFile),e.xp6(5),e.Oqu(t.systemInfo.logFile),e.xp6(6),e.s9C("href",t.SOURCE_URL,e.LSH),e.xp6(1),e.Oqu(t.SOURCE_URL),e.xp6(5),e.s9C("href",t.ISSUES_URL,e.LSH),e.xp6(1),e.Oqu(t.ISSUES_URL),e.xp6(5),e.s9C("href",t.WIKI_URL,e.LSH),e.xp6(1),e.Oqu(t.WIKI_URL)}}function _(s,a){if(1&s&&e._UZ(0,"div",13),2&s){const t=e.oxw();e.Q6J("innerHTML",t.changelog,e.oJD)}}let y=(()=>{class s{constructor(t,n,i){this.httpClient=t,this.systemService=n,this.messageService=i,this.NOT_AVAILABLE="N/A",this.CHANGELOG_URL="https://raw.githubusercontent.com/h3llrais3r/Auto-Subliminal/master/changelog.html",this.SOURCE_URL="https://github.com/h3llrais3r/Auto-Subliminal",this.ISSUES_URL=`${this.SOURCE_URL}/issues`,this.WIKI_URL=`${this.SOURCE_URL}/wiki`,this.gitInstall=!1}ngOnInit(){this.systemService.getSystemInfo().subscribe(t=>{this.systemInfo=t,this.systemInfo.installType===m.$.SOURCE?(this.version=this.systemInfo.currentVersion,this.versionUrl=this.systemInfo.currentVersionUrl):this.systemInfo.installType===m.$.GIT?(this.version=this.systemInfo.releaseVersion,this.gitInstall=!0):this.version=this.NOT_AVAILABLE},()=>this.messageService.showErrorMessage("Unable to get the system info!")),this.httpClient.get(this.CHANGELOG_URL,{responseType:"text"}).subscribe(t=>{this.changelog=this.parseChangelog(t)},()=>this.messageService.showErrorMessage("Unable to get the changelog!"))}parseChangelog(t){let n="";const P=(new DOMParser).parseFromString(t,"text/html").getElementsByClassName("release");return Array.from(P).forEach((g,H)=>{const Y=g.getElementsByClassName("version")[0],F=g.getElementsByClassName("releasedate")[0],B=g.getElementsByClassName("changelog")[0];H>0&&(n+='<hr class="separator">'),n+='<div class="release">',n+='<div class="version-label">Version</div>'+Y.outerHTML,n+='<div class="releasedate-label">Release date</div>'+F.outerHTML,n+='<div class="changelog-label">Changelog</div>'+B.outerHTML,n+="</div>"}),n}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.eN),e.Y36(c.o),e.Y36(u.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-system-info"]],decls:6,vars:2,consts:[[1,"container-lg"],["header","General"],["class","info-wrapper",4,"ngIf"],["header","Changelog"],["class","changelog-wrapper",3,"innerHTML",4,"ngIf"],[1,"info-wrapper"],[1,"info-item","row"],[1,"info-label","col-sm-12","col-md-4"],[1,"info","col-sm-12","col-md-8"],["class","info col-sm-12 col-md-8",4,"ngIf"],["class","info-item row",4,"ngIf"],[1,"separator"],["target","_blank",3,"href"],[1,"changelog-wrapper",3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"p-tabView"),e.TgZ(2,"p-tabPanel",1),e.YNc(3,U,67,18,"div",2),e.qZA(),e.TgZ(4,"p-tabPanel",3),e.YNc(5,_,1,1,"div",4),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.systemInfo),e.xp6(2),e.Q6J("ngIf",n.changelog))},directives:[d.xf,d.x4,r.O5],styles:[".info-wrapper[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:1rem}.info-wrapper[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-weight:500}.changelog-wrapper[_ngcontent-%COMP%]     .release .version{margin-bottom:1rem}.changelog-wrapper[_ngcontent-%COMP%]     .release .version-label{font-weight:500}.changelog-wrapper[_ngcontent-%COMP%]     .release .releasedate{margin-bottom:1rem}.changelog-wrapper[_ngcontent-%COMP%]     .release .releasedate-label{font-weight:500}.changelog-wrapper[_ngcontent-%COMP%]     .release .changelog{margin-bottom:1rem}.changelog-wrapper[_ngcontent-%COMP%]     .release .changelog-label{font-weight:500}"]}),s})();var S=o(8317),I=o(2924),l=o(3228),x=o(2707);function C(s,a){1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"th",7),e.TgZ(2,"span"),e._uU(3,"Name"),e._UZ(4,"p-sortIcon",8),e.qZA(),e.qZA(),e.TgZ(5,"th",9),e.TgZ(6,"span"),e._uU(7,"Active"),e._UZ(8,"p-sortIcon",10),e.qZA(),e.qZA(),e.TgZ(9,"th",11),e.TgZ(10,"span"),e._uU(11,"Alive"),e._UZ(12,"p-sortIcon",12),e.qZA(),e.qZA(),e.TgZ(13,"th",13),e.TgZ(14,"span"),e._uU(15,"Interval"),e._UZ(16,"p-sortIcon",14),e.qZA(),e.qZA(),e.TgZ(17,"th",15),e.TgZ(18,"span"),e._uU(19,"Last run"),e._UZ(20,"p-sortIcon",16),e.qZA(),e.qZA(),e.TgZ(21,"th",17),e.TgZ(22,"span"),e._uU(23,"Next run"),e._UZ(24,"p-sortIcon",18),e.qZA(),e.qZA(),e.qZA())}const O=function(s){return{"scheduler-running":s}};function b(s,a){if(1&s&&(e.TgZ(0,"tr",19),e.TgZ(1,"td"),e.TgZ(2,"span",20),e._uU(3,"Name"),e.qZA(),e.TgZ(4,"span",21),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td"),e.TgZ(7,"span",20),e._uU(8,"Active"),e.qZA(),e.TgZ(9,"span",21),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"span",20),e._uU(13,"Alive"),e.qZA(),e.TgZ(14,"span",21),e._uU(15),e.qZA(),e.qZA(),e.TgZ(16,"td"),e.TgZ(17,"span",20),e._uU(18,"Interval"),e.qZA(),e.TgZ(19,"span",21),e._uU(20),e.qZA(),e.qZA(),e.TgZ(21,"td"),e.TgZ(22,"span",20),e._uU(23,"Last Run"),e.qZA(),e.TgZ(24,"span",21),e._uU(25),e.qZA(),e.qZA(),e.TgZ(26,"td"),e.TgZ(27,"span",20),e._uU(28,"Next run"),e.qZA(),e.TgZ(29,"span",21),e._uU(30),e.qZA(),e.qZA(),e.qZA()),2&s){const t=a.$implicit;e.Q6J("ngClass",e.VKq(7,O,t.running)),e.xp6(5),e.Oqu(t.name),e.xp6(5),e.Oqu(t.active),e.xp6(5),e.Oqu(t.alive),e.xp6(5),e.Oqu(t.intervalFormatted),e.xp6(5),e.Oqu(t.lastRunFormatted),e.xp6(5),e.Oqu(t.running?"Running":t.nextRunFormatted)}}function L(s,a){1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"th",7),e.TgZ(2,"span"),e._uU(3,"Name"),e._UZ(4,"p-sortIcon",8),e.qZA(),e.qZA(),e.TgZ(5,"th",22),e.TgZ(6,"span"),e._uU(7,"Path"),e._UZ(8,"p-sortIcon",23),e.qZA(),e.qZA(),e.TgZ(9,"th",24),e.TgZ(10,"span"),e._uU(11,"Free space"),e._UZ(12,"p-sortIcon",25),e.qZA(),e.qZA(),e.qZA())}function w(s,a){1&s&&e._UZ(0,"i",28)}function R(s,a){if(1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"span",20),e._uU(3,"Name"),e.qZA(),e.TgZ(4,"span",21),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td"),e.TgZ(7,"span",20),e._uU(8,"Path"),e.qZA(),e.TgZ(9,"span",26),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"span",20),e._uU(13,"Free space"),e.qZA(),e.TgZ(14,"span",21),e._uU(15),e.YNc(16,w,1,0,"i",27),e.qZA(),e.qZA(),e.qZA()),2&s){const t=a.$implicit;e.xp6(5),e.Oqu(t.name),e.xp6(5),e.Oqu(t.path),e.xp6(5),e.Oqu(t.freeSpaceFormatted),e.xp6(1),e.Q6J("ngIf",t.freePercentage<10)}}const M=[{path:"",redirectTo:"info",pathMatch:"full"},{path:"info",component:y},{path:"status",component:(()=>{class s{constructor(t,n,i){this.systemService=t,this.systemEventService=n,this.messageService=i}ngOnInit(){this.systemService.getSchedulers().subscribe(t=>{this.schedulers=t,this.systemEventService.schedulerStart.subscribe(n=>{this.schedulers=this.schedulers.map(i=>i.name===n.name?n:i)}),this.systemEventService.schedulerFinish.subscribe(n=>{this.schedulers=this.schedulers.map(i=>i.name===n.name?n:i)})},()=>this.messageService.showErrorMessage("Unable to get the system schedulers!")),this.systemService.getPaths().subscribe(t=>{this.paths=t},()=>this.messageService.showErrorMessage("Unable to get the system paths!"))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(c.o),e.Y36(S.h),e.Y36(u.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-system-status"]],decls:14,vars:6,consts:[[1,"container-lg"],["header","Status"],[1,"panel-section"],[1,"panel-section-header"],["styleClass","p-datatable-sm p-datatable-gridlines p-datatable-striped p-datatable-responsive-mode",3,"value","autoLayout","rowHover"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],["field","name"],["pSortableColumn","active"],["field","active"],["pSortableColumn","alive"],["field","alive"],["pSortableColumn","interval"],["field","interval"],["pSortableColumn","lastRun"],["field","lastRun"],["pSortableColumn","nextRun"],["field","nextRun"],[3,"ngClass"],[1,"p-column-title"],[1,"p-column-data"],["pSortableColumn","path"],["field","path"],["pSortableColumn","freeBytes"],["field","freeBytes"],[1,"p-column-data","wrap-text"],["class","fa fa-exclamation-triangle text-danger ml-1","title","Low disk space",4,"ngIf"],["title","Low disk space",1,"fa","fa-exclamation-triangle","text-danger","ml-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"p-panel",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._uU(4,"Schedulers"),e.qZA(),e.TgZ(5,"p-table",4),e.YNc(6,C,25,0,"ng-template",5),e.YNc(7,b,31,9,"ng-template",6),e.qZA(),e.qZA(),e.TgZ(8,"div",2),e.TgZ(9,"div",3),e._uU(10,"Paths"),e.qZA(),e.TgZ(11,"p-table",4),e.YNc(12,L,13,0,"ng-template",5),e.YNc(13,R,17,4,"ng-template",6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("value",n.schedulers)("autoLayout",!0)("rowHover",!0),e.xp6(6),e.Q6J("value",n.paths)("autoLayout",!0)("rowHover",!0))},directives:[I.s,l.iA,x.jx,l.lQ,l.fz,r.mk,r.O5],styles:[".scheduler-running[_ngcontent-%COMP%]{background-color:var(--success)!important}"]}),s})()},{path:"**",redirectTo:"info"}];let N=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[p.Bz.forChild(M)],p.Bz]}),s})(),E=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[h.m,N]]}),s})()}}]);